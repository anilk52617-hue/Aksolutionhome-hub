<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AK SOLUTION HUB</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #005eb8; --success: #27ae60; --bg: #f4f7fa; }
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; }
        body { background: #fff; padding-bottom: 80px; text-align: center; overflow-x: hidden; }

        /* Header */
        .header { padding: 15px; background: #fff; }
        .logo-img { width: 90px; height: 90px; border-radius: 50%; border: 3px solid var(--primary); padding: 3px; cursor: pointer; object-fit: cover; }
        .brand-title { color: var(--primary); font-size: 24px; font-weight: bold; margin: 5px 0; }
        .call-btn { background: #27ae60; color: white; padding: 10px 25px; border-radius: 30px; text-decoration: none; font-weight: bold; display: inline-flex; align-items: center; gap: 8px; font-size: 18px; margin-bottom: 10px; box-shadow: 0 4px 10px rgba(39,174,96,0.3); }

        /* Ticker */
        .ticker { background: var(--primary); color: #fff; padding: 8px; font-size: 14px; }

        /* Banner */
        .banner { width: 92%; margin: 15px auto; border-radius: 20px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .banner img { width: 100%; display: block; }

        /* Grid - White Card Style */
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; padding: 15px; background: var(--bg); }
        .box { background: #fff; border-radius: 15px; padding: 20px 5px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); cursor: pointer; border: 1px solid #eee; }
        .box i { font-size: 32px; color: var(--primary); margin-bottom: 10px; display: block; }
        .box span { font-size: 11px; font-weight: 800; color: #333; }

        /* Bracket Style Inputs */
        .page { display: none; padding: 20px; animation: fadeIn 0.4s ease; }
        .active-page { display: block; }
        .input-box { width: 100%; padding: 16px; border: 2px solid #ddd; border-radius: 12px; font-size: 16px; margin-bottom: 15px; outline: none; text-align: center; transition: 0.3s; }
        .input-box:focus { border-color: var(--primary); background: #f0f7ff; }
        .main-btn { width: 100%; padding: 16px; background: var(--primary); color: #fff; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 12px rgba(0,94,184,0.3); }

        /* Bottom Nav */
        .nav { position: fixed; bottom: 0; width: 100%; background: #fff; display: flex; border-top: 1px solid #ddd; height: 75px; z-index: 1000; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #888; font-size: 12px; cursor: pointer; }
        .nav-item.active { color: var(--primary); border-top: 4px solid var(--primary); font-weight: bold; }
        .nav-item i { font-size: 22px; margin-bottom: 4px; }

        /* Modals */
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:9999; backdrop-filter: blur(5px); }
        .modal-content { background:#fff; width:88%; margin:20% auto; border-radius:25px; padding:25px; max-height: 75vh; overflow-y: auto; position: relative; }

        #loader { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.9); z-index:10000; justify-content:center; align-items:center; flex-direction: column; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div id="loader"><i class="fas fa-circle-notch fa-spin fa-3x" style="color:var(--primary);"></i><br><p>‡§°‡•á‡§ü‡§æ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à...</p></div>

<div class="header">
    <img src="1.jpg" class="logo-img" onclick="adminCheck()">
    <div class="brand-title">AK SOLUTION HUB</div>
    <a href="tel:9927464530" class="call-btn"><i class="fas fa-phone-alt"></i> ‡§Ö‡§≠‡•Ä ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç</a>
</div>

<div class="ticker"><marquee>üöÄ ‡§¨‡•á‡§∏‡•ç‡§ü ‡§π‡•ã‡§Æ ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ | ‡§™‡•ç‡§≤‡§Ç‡§¨‡§∞ | ‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•Ä‡§∂‡§ø‡§Ø‡§® | ‡§Ü‡§∞‡§ì | ‡§∏‡•Ä‡§∏‡•Ä‡§ü‡•Ä‡§µ‡•Ä | ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï: 9927464530</marquee></div>

<div id="home" class="page active-page">
    <div class="banner"><img src="1.jpg"></div>
    <div class="grid" id="mainGrid"></div>
</div>

<div id="booking" class="page">
    <h2 style="color:var(--primary); margin-bottom:20px;">‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§´‡•â‡§∞‡•ç‡§Æ</h2>
    <input type="text" id="svc" class="input-box" readonly style="background:#eef5ff; font-weight:bold; border-color:var(--primary);">
    <input type="text" id="name" class="input-box" placeholder="‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ">
    <input type="tel" id="phone" class="input-box" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞">
    <textarea id="addr" class="input-box" rows="3" placeholder="‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ (‡§Æ‡§ï‡§æ‡§® ‡§®‡§Ç, ‡§ó‡§≤‡•Ä, ‡§≤‡•à‡§Ç‡§°‡§Æ‡§æ‡§∞‡•ç‡§ï)"></textarea>
    <button class="main-btn" style="background:#3498db; margin-bottom:10px;" onclick="getGPS()"><i class="fas fa-map-marker-alt"></i> ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§ï‡§®‡•ç‡§´‡§∞‡•ç‡§Æ ‡§ï‡§∞‡•á‡§Ç</button>
    <button id="finalSubmit" class="main-btn" style="background:var(--success); display:none;" onclick="saveAndSend()"><i class="fab fa-whatsapp"></i> ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
</div>

<div id="track" class="page">
    <h2 style="margin-bottom:20px; color:var(--primary);">‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§ü‡•ç‡§∞‡•à‡§ï</h2>
    <input type="text" id="trackInput" class="input-box" placeholder="‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ID ‡§°‡§æ‡§≤‡•á‡§Ç (AK-XXXX)">
    <button class="main-btn" onclick="alert('‡§ñ‡•ã‡§ú ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...')">‡§Ö‡§≠‡•Ä ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç</button>
</div>

<div class="nav">
    <div class="nav-item active" onclick="go('home', this)"><i class="fas fa-home"></i>Home</div>
    <div class="nav-item" onclick="go('booking', this)"><i class="fas fa-calendar-check"></i>Booking</div>
    <div class="nav-item" onclick="go('track', this)"><i class="fas fa-search-location"></i>Track</div>
    <div class="nav-item" onclick="go('review', this)"><i class="fas fa-star"></i>Review</div>
</div>

<div id="adminModal" class="modal">
    <div class="modal-content" style="border: 3px solid var(--primary);">
        <i class="fas fa-user-shield" style="font-size:45px; color:var(--primary); margin-bottom:15px;"></i>
        <h3 style="margin-bottom:20px; color:var(--primary);">‡§Æ‡§æ‡§∏‡•ç‡§ü‡§∞ ‡§è‡§°‡§Æ‡§ø‡§® ‡§≤‡•â‡§ó‡§ø‡§®</h3>
        <input type="password" id="adminPass" class="input-box" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§°‡§æ‡§≤‡•á‡§Ç" style="border-color:var(--primary); font-size: 20px;">
        <button class="main-btn" onclick="verifyAdmin()">‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§ï‡§∞‡•á‡§Ç</button>
        <p onclick="closeAdmin()" style="margin-top:20px; color:red; cursor:pointer; font-weight:bold;">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</p>
    </div>
</div>

<div id="subModal" class="modal">
    <div class="modal-content">
        <h3 id="mTitle" style="color:var(--primary); margin-bottom:15px; border-bottom: 2px solid var(--primary); padding-bottom:10px;"></h3>
        <div id="mList" class="grid" style="grid-template-columns: 1fr 1fr; background:none;"></div>
        <button onclick="closeSub()" style="width:100%; padding:12px; background:#444; color:#fff; border:none; border-radius:12px; margin-top:15px; font-weight:bold;">‡§µ‡§æ‡§™‡§∏</button>
    </div>
</div>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxmh2ezhk9TFSaQtL5gaSf4GLUvIIY9bAqRqtGDwQmJjNinl_1UTBIg5joRlsX6uJu18Q/exec";
    let userGPS = "Not Provided";
    let tapCount = 0;

    const services = {
        'PLUMBER': ['‡§®‡§≤ ‡§∞‡§ø‡§™‡•á‡§Ø‡§∞', '‡§ü‡§Ç‡§ï‡•Ä ‡§∏‡§´‡§æ‡§à', '‡§≤‡•Ä‡§ï‡•á‡§ú', '‡§®‡§à ‡§´‡§ø‡§ü‡§ø‡§Ç‡§ó', '‡§ó‡•Ä‡§ú‡§∞', '‡§∏‡§ø‡§Ç‡§ï', '‡§Æ‡•ã‡§ü‡§∞', '‡§ü‡•â‡§Ø‡§≤‡•á‡§ü', '‡§Ö‡§®‡•ç‡§Ø'],
        'ELECTRICIAN': ['‡§™‡§Ç‡§ñ', '‡§µ‡§æ‡§Ø‡§∞‡§ø‡§Ç‡§ó', '‡§¨‡•ã‡§∞‡•ç‡§°', '‡§á‡§®‡§µ‡§∞‡•ç‡§ü‡§∞', 'MCB', '‡§≤‡§æ‡§á‡§ü', '‡§ï‡•Ç‡§≤‡§∞', '‡§ù‡•Ç‡§Æ‡§∞', '‡§Ö‡§®‡•ç‡§Ø'],
        'CARPENTER': ['‡§≤‡•â‡§ï', '‡§Ö‡§≤‡§Æ‡§æ‡§∞‡•Ä', '‡§¨‡•á‡§°', '‡§¶‡§∞‡§µ‡§æ‡§ú‡§æ', '‡§¶‡§∞‡§æ‡§ú', '‡§™‡•â‡§≤‡§ø‡§∂', '‡§ï‡•Å‡§∞‡•ç‡§∏‡•Ä', '‡§ï‡§ø‡§ö‡§®', '‡§Ö‡§®‡•ç‡§Ø'],
        'RO SERVICE': ['‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞', '‡§Æ‡•á‡§Æ‡•ç‡§¨‡•ç‡§∞‡•á‡§®', '‡§™‡§Ç‡§™', '‡§≤‡•Ä‡§ï‡•á‡§ú', 'TDS', '‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏', '‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤', '‡§Ö‡§®‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤', '‡§Ö‡§®‡•ç‡§Ø'],
        'CCTV': ['‡§´‡§ø‡§ü‡§ø‡§Ç‡§ó', 'DVR', '‡§ë‡§®‡§≤‡§æ‡§á‡§®', '‡§µ‡§æ‡§Ø‡§∞‡§ø‡§Ç‡§ó', 'HDD', '‡§™‡•â‡§µ‡§∞', 'BNC', '‡§∂‡§ø‡§´‡•ç‡§ü‡§ø‡§Ç‡§ó', '‡§Ö‡§®‡•ç‡§Ø'],
        'AC SERVICE': ['‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏', '‡§ó‡•à‡§∏', '‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤', '‡§∞‡§ø‡§Æ‡•Ç‡§µ‡§≤', 'PCB', '‡§≤‡•Ä‡§ï‡•á‡§ú', 'Window', 'Split', '‡§Ö‡§®‡•ç‡§Ø'],
        'CLEANING': ['‡§°‡•Ä‡§™ ‡§ï‡•ç‡§≤‡•Ä‡§®', '‡§¨‡§æ‡§•‡§∞‡•Ç‡§Æ', '‡§∏‡•ã‡§´‡§æ', '‡§ï‡§ø‡§ö‡§®', '‡§ü‡§Ç‡§ï‡•Ä', '‡§ï‡§æ‡§∞', '‡§™‡•á‡§∏‡•ç‡§ü', '‡§´‡•ç‡§≤‡•ã‡§∞', '‡§Ö‡§®‡•ç‡§Ø'],
        'FITTING': ['TV ‡§∏‡•ç‡§ü‡•à‡§Ç‡§°', '‡§™‡§∞‡•ç‡§¶‡§æ ‡§∞‡•â‡§°', '‡§Ü‡§à‡§®‡§æ', '‡§´‡•ã‡§ü‡•ã', '‡§∏‡•á‡§ü', '‡§ù‡•Ç‡§≤‡§æ', '‡§®‡•á‡§Æ ‡§™‡•ç‡§≤‡•á‡§ü', '‡§∏‡•ç‡§ü‡•à‡§Ç‡§°', '‡§Ö‡§®‡•ç‡§Ø'],
        'OTHER': ['‡§™‡•á‡§Ç‡§ü‡§∞', '‡§∞‡§æ‡§ú‡§Æ‡§ø‡§∏‡•ç‡§§‡•ç‡§∞‡•Ä', '‡§µ‡•á‡§≤‡•ç‡§°‡§ø‡§Ç‡§ó', '‡§ü‡§æ‡§á‡§≤', '‡§ó‡•ç‡§≤‡§æ‡§∏', '‡§ó‡§æ‡§∞‡•ç‡§°‡§®', '‡§π‡•á‡§≤‡•ç‡§™‡§∞', '‡§á‡§Ç‡§ü‡•Ä‡§∞‡§ø‡§Ø‡§∞', '‡§Ö‡§®‡•ç‡§Ø']
    };

    const icons = {'PLUMBER':'faucet','ELECTRICIAN':'bolt','CARPENTER':'hammer','RO SERVICE':'tint','CCTV':'video','AC SERVICE':'snowflake','CLEANING':'broom','FITTING':'tools','OTHER':'plus-circle'};

    // Build Grid
    const grid = document.getElementById('mainGrid');
    Object.keys(services).forEach(s => {
        grid.innerHTML += `<div class="box" onclick="openSub('${s}')"><i class="fas fa-${icons[s]}"></i><span>${s}</span></div>`;
    });

    function go(id, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
        document.getElementById(id).classList.add('active-page');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        if(el) el.classList.add('active');
    }

    function openSub(cat) {
        const list = document.getElementById('mList');
        document.getElementById('mTitle').innerText = cat;
        list.innerHTML = "";
        services[cat].forEach(s => {
            list.innerHTML += `<div class="box" style="height:65px; padding:10px;" onclick="selectSvc('${cat} - ${s}')"><span>${s}</span></div>`;
        });
        document.getElementById('subModal').style.display = 'block';
    }

    function selectSvc(val) {
        document.getElementById('svc').value = val;
        closeSub();
        go('booking', document.querySelectorAll('.nav-item')[1]);
    }

    function getGPS() {
        if (navigator.geolocation) {
            document.getElementById('loader').style.display = 'flex';
            navigator.geolocation.getCurrentPosition(p => {
                userGPS = `https://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`;
                document.getElementById('finalSubmit').style.display = 'block';
                document.getElementById('loader').style.display = 'none';
                alert("üìç ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§ï‡§®‡•ç‡§´‡§∞‡•ç‡§Æ ‡§π‡•ã ‡§ó‡§à!");
            }, () => { 
                alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§ö‡§æ‡§≤‡•Ç ‡§ï‡§∞‡•á‡§Ç!"); 
                document.getElementById('loader').style.display = 'none'; 
            });
        }
    }

    async function saveAndSend() {
        const name = document.getElementById('name').value;
        const phone = document.getElementById('phone').value;
        const addr = document.getElementById('addr').value;
        const svc = document.getElementById('svc').value;

        if(!name || !phone || !addr) return alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≠‡§∞‡•á‡§Ç!");
        document.getElementById('loader').style.display = 'flex';
        
        const id = "AK-" + Math.floor(1000 + Math.random() * 9000);
        const date = new Date().toLocaleDateString('en-GB');

        try {
            // ‡§ó‡•Ç‡§ó‡§≤ ‡§∂‡•Ä‡§ü ‡§Æ‡•á‡§Ç ‡§°‡•á‡§ü‡§æ ‡§∏‡•á‡§µ ‡§ï‡§∞‡§®‡§æ
            await fetch(`${SCRIPT_URL}?Date=${date}&ID=${id}&Name=${encodeURIComponent(name)}&Phone=${phone}&Address=${encodeURIComponent(addr)}&Service=${encodeURIComponent(svc)}&GPS=${encodeURIComponent(userGPS)}&Status=Pending`, {mode: 'no-cors'});
            
            // ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§Æ‡•à‡§∏‡•á‡§ú ‡§≠‡•á‡§ú‡§®‡§æ
            const msg = `*AK SOLUTION HUB*%0AüÜî ID: ${id}%0Aüõ†Ô∏è Service: ${svc}%0Aüë§ Name: ${name}%0Aüìû Phone: ${phone}%0Aüè† Address: ${addr}%0Aüìç Location: ${userGPS}`;
            window.open(`https://wa.me/919927464530?text=${msg}`);
            
            alert("‚úÖ ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§∏‡§´‡§≤! ‡§Ü‡§™‡§ï‡•Ä ID ‡§π‡•à: " + id);
            location.reload();
        } catch(e) { 
            alert("Error! ‡§°‡•á‡§ü‡§æ ‡§∏‡•á‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§™‡§æ‡§Ø‡§æ‡•§"); 
            document.getElementById('loader').style.display = 'none'; 
        }
    }

    // --- ‡§Æ‡§æ‡§∏‡•ç‡§ü‡§∞ ‡§è‡§°‡§Æ‡§ø‡§® ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ---
    function adminCheck() {
        tapCount++;
        if(tapCount === 3) { 
            document.getElementById('adminModal').style.display = 'block'; 
            tapCount = 0; 
        }
        setTimeout(() => tapCount = 0, 2000);
    }

    function verifyAdmin() {
        const pass = document.getElementById('adminPass').value;
        if(pass === "Ak2525") { 
            alert("‚úÖ ‡§≤‡•â‡§ó‡§ø‡§® ‡§∏‡§´‡§≤!"); 
            // ‡§è‡§°‡§Æ‡§ø‡§® ‡§™‡•à‡§®‡§≤ ‡§´‡§æ‡§á‡§≤ ‡§™‡§∞ ‡§∞‡•Ä‡§°‡§æ‡§Ø‡§∞‡•á‡§ï‡•ç‡§ü
            window.location.href = "admin.html"; 
        } else { 
            alert("‚ùå ‡§ó‡§≤‡§§ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°!"); 
            document.getElementById('adminPass').value = "";
        }
    }

    function closeSub() { document.getElementById('subModal').style.display = 'none'; }
    function closeAdmin() { document.getElementById('adminModal').style.display = 'none'; }
</script>
</body>
</html>
