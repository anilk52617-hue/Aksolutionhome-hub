<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AK SOLUTION HUB</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #005eb8; --success: #27ae60; --bg: #eef2f7; --dark: #2c3e50; }
        * { box-sizing: border-box; font-family: 'Poppins', sans-serif; margin: 0; padding: 0; }
        body { background: #fff; padding-bottom: 80px; text-align: center; overflow-x: hidden; }
        
        .header { padding: 15px; background: #fff; position: sticky; top:0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .logo-img { width: 80px; height: 80px; border-radius: 50%; border: 3px solid var(--primary); padding: 3px; cursor: pointer; object-fit: cover; }
        .brand-title { color: var(--primary); font-size: 22px; font-weight: bold; margin: 5px 0; }
        .call-btn { background: #27ae60; color: white; padding: 8px 20px; border-radius: 30px; text-decoration: none; font-weight: bold; display: inline-flex; align-items: center; gap: 8px; font-size: 16px; margin-bottom: 10px; box-shadow: 0 4px 10px rgba(39,174,96,0.3); }
        .ticker { background: var(--primary); color: #fff; padding: 6px; font-size: 12px; overflow: hidden; }

        /* Rolling Banner Style */
        .banner { width: 92%; margin: 15px auto; border-radius: 20px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1); height: 160px; position: relative; }
        .banner img { width: 100%; height: 100%; object-fit: cover; display: none; }
        .banner img.active { display: block; animation: fade 0.8s; }
        @keyframes fade { from {opacity: 0.4} to {opacity: 1} }

        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 15px; background: var(--bg); }
        .box { background: white; padding: 15px 5px; border-radius: 15px; text-align: center; border-bottom: 4px solid #ddd; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .box i { font-size: 24px; color: var(--primary); margin-bottom: 8px; }
        .box span { font-size: 10px; color: #555; font-weight: bold; text-transform: uppercase; }
        
        .page { display: none; padding: 20px; animation: fadeIn 0.4s ease; }
        .active-page { display: block; }
        .input-box { width: 100%; padding: 14px; border: 2px solid #ddd; border-radius: 12px; font-size: 15px; margin-bottom: 15px; text-align: center; outline: none; }
        .main-btn { width: 100%; padding: 15px; background: var(--primary); color: #fff; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; }
        
        .nav { position: fixed; bottom: 0; width: 100%; background: #fff; display: flex; border-top: 1px solid #ddd; height: 70px; z-index: 1000; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #888; font-size: 10px; cursor: pointer; }
        .nav-item.active { color: var(--primary); border-top: 4px solid var(--primary); font-weight: bold; }
        
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:9999; backdrop-filter: blur(5px); }
        .modal-content { background:#fff; width:92%; margin:15% auto; border-radius:25px; padding:20px; text-align: center; max-height: 80vh; overflow-y: auto; }
        .p-card { background:#f8f9fa; padding:15px; border-radius:15px; text-align:left; margin-bottom:10px; border-left:4px solid var(--primary); font-size: 13px; color: #333; line-height: 1.5; }
        
        .rating-stars { margin-bottom: 15px; font-size: 28px; }
        .fa-star { color: #ddd; cursor: pointer; transition: 0.2s; }
        .fa-star.active { color: #f1c40f; }
        
        .dateTime-row { display: flex; gap: 10px; margin-bottom: 15px; }
        .dateTime-row input { flex: 1; margin-bottom: 0; padding: 10px; }
        #loader { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.9); z-index:10000; justify-content:center; align-items:center; flex-direction: column; }
    </style>
</head>
<body>

<div id="loader"><i class="fas fa-sync fa-spin fa-3x" style="color:var(--primary);"></i><br><p>‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</p></div>

<div class="header">
    <img src="57255.jpg" class="logo-img" onclick="adminCheck()">
    <div class="brand-title">AK SOLUTION HUB</div>
    <a href="tel:9927464530" class="call-btn"><i class="fas fa-phone-alt"></i> ‡§Ö‡§≠‡•Ä ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç</a>
</div>

<div class="ticker"><marquee>üöÄ ‡§¨‡•á‡§∏‡•ç‡§ü ‡§π‡•ã‡§Æ ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ | ‡§™‡•ç‡§≤‡§Ç‡§¨‡§∞ | ‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•Ä‡§∂‡§ø‡§Ø‡§® | ‡§Ü‡§∞‡§ì | ‡§∏‡•Ä‡§∏‡•Ä‡§ü‡•Ä‡§µ‡•Ä | ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï: 9927464530</marquee></div>

<div id="home" class="page active-page">
    <div class="banner" id="bannerSlider">
        <img src="1.jpg" class="active">
        <img src="2.jpg">
        <img src="3.jpg">
        <img src="4.jpg">
        <img src="5.jpg">
    </div>
    <div class="grid" id="mainGrid"></div>
</div>

<div id="booking" class="page">
    <h2 style="color:var(--primary); margin-bottom:15px;">‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§´‡•â‡§∞‡•ç‡§Æ</h2>
    <input type="text" id="svc" class="input-box" readonly style="background:#eef5ff; font-weight:bold; color:var(--primary);">
    <input type="text" id="name" class="input-box" placeholder="‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ">
    <input type="tel" id="phone" class="input-box" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞">
    <textarea id="addr" class="input-box" rows="3" placeholder="‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ (‡§ó‡§≤‡•Ä, ‡§≤‡•à‡§Ç‡§°‡§Æ‡§æ‡§∞‡•ç‡§ï)"></textarea>
    
    <div class="dateTime-row">
        <input type="date" id="bookDate" class="input-box">
        <input type="time" id="bookTime" class="input-box">
    </div>

    <button class="main-btn" style="background:#3498db; margin-bottom:10px;" onclick="showLocModal()"><i class="fas fa-map-marker-alt"></i> ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§ï‡§®‡•ç‡§´‡§∞‡•ç‡§Æ ‡§ï‡§∞‡•á‡§Ç</button>
    <button id="finalSubmit" class="main-btn" style="background:var(--success); display:none;" onclick="saveAndSend()"><i class="fab fa-whatsapp"></i> ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
</div>

<div id="locModal" class="modal">
    <div class="modal-content">
        <h3>‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§Æ‡•ã‡§° ‡§ö‡•Å‡§®‡•á‡§Ç</h3><br>
        <button class="main-btn" style="background:var(--primary); margin-bottom:15px;" onclick="getLiveGPS()">üìç ‡§≤‡§æ‡§á‡§µ GPS ‡§≤‡•ã‡§ï‡•á‡§∂‡§®</button>
        <button class="main-btn" style="background:#34495e;" onclick="getManualMap()">üè† ‡§≤‡§ø‡§ñ‡•á ‡§™‡§§‡•á ‡§ï‡§æ ‡§Æ‡•à‡§™ ‡§¨‡§®‡§æ‡§è‡§Ç</button>
        <p onclick="document.getElementById('locModal').style.display='none'" style="color:red; margin-top:15px; cursor:pointer;">‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Å</p>
    </div>
</div>

<div id="review" class="page">
    <h2 style="color:var(--primary); margin-bottom:15px;">Customer Reviews</h2>
    <div class="rating-stars">
        <i class="fas fa-star" onclick="setStar(1)"></i>
        <i class="fas fa-star" onclick="setStar(2)"></i>
        <i class="fas fa-star" onclick="setStar(3)"></i>
        <i class="fas fa-star" onclick="setStar(4)"></i>
        <i class="fas fa-star" onclick="setStar(5)"></i>
    </div>
    <textarea id="revText" class="input-box" placeholder="‡§Ö‡§™‡§®‡§æ ‡§´‡•Ä‡§°‡§¨‡•à‡§ï ‡§Ø‡§π‡§æ‡§Å ‡§≤‡§ø‡§ñ‡•á‡§Ç..." rows="3"></textarea>
    <button class="main-btn" onclick="sendReview()">‡§∞‡§ø‡§µ‡•ç‡§Ø‡•Ç ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
</div>

<div id="privacy" class="page">
    <h2 style="color:var(--primary); margin-bottom:20px;"><i class="fas fa-user-shield"></i> Privacy Policy</h2>
    <div class="p-card">1. We collect name and phone for service delivery.</div>
    <div class="p-card">2. Precise GPS location is accessed for navigation.</div>
    <div class="p-card">3. Data is secure and not shared with third parties.</div>
    <div class="p-card">4. Users can request data deletion anytime.</div>
    <button class="main-btn" style="background:#e74c3c; margin-top:10px;" onclick="window.location.href='https://wa.me/919927464530?text=Delete%20My%20Data'">Delete My Data</button>
</div>

<div class="nav">
    <div class="nav-item active" onclick="go('home', this)"><i class="fas fa-home"></i>Home</div>
    <div class="nav-item" onclick="go('booking', this)"><i class="fas fa-calendar-check"></i>Book</div>
    <div class="nav-item" onclick="go('track', this)"><i class="fas fa-search-location"></i>Track</div>
    <div class="nav-item" onclick="go('review', this)"><i class="fas fa-star"></i>Review</div>
    <div class="nav-item" onclick="go('privacy', this)"><i class="fas fa-user-shield"></i>Privacy</div>
</div>

<div id="subModal" class="modal"><div class="modal-content"><h3 id="mTitle"></h3><div id="mList" class="grid" style="grid-template-columns: 1fr 1fr; background:none;"></div><button onclick="closeSub()" class="main-btn" style="background:var(--dark); margin-top:20px;">‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Å</button></div></div>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwdgQ-M7wqK8uYWcbJhLY1msNX1hxJ_mif1vWmO9vIsSy6zorO3oVzPokQKlrApr9Rexw/exec";
    let userGPS = "Not Provided";
    let selectedStars = 0;

    // Rolling Image Slider Logic
    let currentImg = 0;
    const imgs = document.querySelectorAll('#bannerSlider img');
    if(imgs.length > 0) {
        setInterval(() => {
            imgs[currentImg].classList.remove('active');
            currentImg = (currentImg + 1) % imgs.length;
            imgs[currentImg].classList.add('active');
        }, 3000);
    }

    const services = {
        'PLUMBER': ['‡§®‡§≤ ‡§∞‡§ø‡§™‡•á‡§Ø‡§∞', '‡§ü‡§Ç‡§ï‡•Ä ‡§∏‡§´‡§æ‡§à', '‡§≤‡•Ä‡§ï‡•á‡§ú', 'Fitting', 'Geyser', '‡§∏‡§ø‡§Ç‡§ï', '‡§Æ‡•ã‡§ü‡§∞', '‡§Ö‡§®‡•ç‡§Ø'],
        'ELECTRICIAN': ['‡§™‡§Ç‡§ñ', '‡§µ‡§æ‡§Ø‡§∞‡§ø‡§Ç‡§ó', '‡§¨‡•ã‡§∞‡•ç‡§°', 'Inverter', 'MCB', '‡§≤‡§æ‡§á‡§ü', '‡§ï‡•Ç‡§≤‡§∞', '‡§Ö‡§®‡•ç‡§Ø'],
        'CARPENTER': ['‡§≤‡•â‡§ï', '‡§Ö‡§≤‡§Æ‡§æ‡§∞‡•Ä', '‡§¨‡•á‡§°', '‡§¶‡§∞‡§µ‡§æ‡§ú‡§æ', '‡§¶‡§∞‡§æ‡§ú', '‡§™‡•â‡§≤‡§ø‡§∂', '‡§Ö‡§®‡•ç‡§Ø'],
        'RO SERVICE': ['‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞', '‡§Æ‡•á‡§Æ‡•ç‡§¨‡•ç‡§∞‡•á‡§®', '‡§™‡§Ç‡§™', '‡§≤‡•Ä‡§ï‡•á‡§ú', 'TDS', '‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏', 'Install', '‡§Ö‡§®‡•ç‡§Ø'],
        'CCTV': ['‡§´‡§ø‡§ü‡§ø‡§Ç‡§ó', 'DVR', '‡§ë‡§®‡§≤‡§æ‡§á‡§®', '‡§µ‡§æ‡§Ø‡§∞‡§ø‡§Ç‡§ó', 'HDD', '‡§Ö‡§®‡•ç‡§Ø'],
        'AC SERVICE': ['‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏', '‡§ó‡•à‡§∏', 'Install', 'PCB', '‡§≤‡•Ä‡§ï‡•á‡§ú', '‡§Ö‡§®‡•ç‡§Ø'],
        'CLEANING': ['Deep Clean', '‡§∏‡•ã‡§´‡§æ', '‡§ï‡§ø‡§ö‡§®', '‡§Ö‡§®‡•ç‡§Ø'],
        'FITTING': ['TV Stand', '‡§™‡§∞‡•ç‡§¶‡§æ ‡§∞‡•â‡§°', '‡§Ü‡§à‡§®‡§æ', '‡§Ö‡§®‡•ç‡§Ø'],
        'OTHER': ['‡§™‡•á‡§Ç‡§ü‡§∞', '‡§∞‡§æ‡§ú‡§Æ‡§ø‡§∏‡•ç‡§§‡•ç‡§∞‡•Ä', '‡§µ‡•á‡§≤‡•ç‡§°‡§ø‡§Ç‡§ó', '‡§Ö‡§®‡•ç‡§Ø']
    };
    
    const colors = {'PLUMBER':'#005eb8','ELECTRICIAN':'#f39c12','CARPENTER':'#e67e22','RO SERVICE':'#3498db','CCTV':'#e74c3c','AC SERVICE':'#1abc9c','CLEANING':'#27ae60','FITTING':'#9b59b6','OTHER':'#34495e'};
    const icons = {'PLUMBER':'faucet','ELECTRICIAN':'bolt','CARPENTER':'hammer','RO SERVICE':'tint','CCTV':'video','AC SERVICE':'snowflake','CLEANING':'broom','FITTING':'tools','OTHER':'plus-circle'};

    Object.keys(services).forEach(s => {
        document.getElementById('mainGrid').innerHTML += `<div class="box" style="border-bottom-color:${colors[s]}" onclick="openSub('${s}')"><i class="fas fa-${icons[s]}" style="color:${colors[s]}"></i><span>${s}</span></div>`;
    });

    function go(id, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
        document.getElementById(id).classList.add('active-page');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        if(el) el.classList.add('active');
    }

    function openSub(cat) {
        const list = document.getElementById('mList');
        document.getElementById('mTitle').innerText = cat;
        list.innerHTML = "";
        services[cat].forEach(s => { list.innerHTML += `<div class="box" style="padding:10px; border-bottom-color:${colors[cat]}" onclick="selectSvc('${cat} - ${s}')"><span>${s}</span></div>`; });
        document.getElementById('subModal').style.display = 'block';
    }
    function selectSvc(val) { document.getElementById('svc').value = val; closeSub(); go('booking', document.querySelectorAll('.nav-item')[1]); }
    function closeSub() { document.getElementById('subModal').style.display = 'none'; }

    function showLocModal() { if(!document.getElementById('addr').value) return alert("‡§™‡§π‡§≤‡•á ‡§™‡§§‡§æ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç!"); document.getElementById('locModal').style.display = 'block'; }
    function getLiveGPS() {
        if (navigator.geolocation) {
            document.getElementById('loader').style.display = 'flex';
            navigator.geolocation.getCurrentPosition(p => {
                userGPS = `https://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`;
                finishSetup("üìç ‡§≤‡§æ‡§á‡§µ ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§à!");
            }, () => { alert("GPS ‡§™‡§∞‡§Æ‡§ø‡§∂‡§® ‡§¶‡•á‡§Ç!"); document.getElementById('loader').style.display = 'none'; });
        }
    }
    function getManualMap() {
        userGPS = `https://www.google.com/maps/search/${encodeURIComponent(document.getElementById('addr').value)}`;
        finishSetup("üè† ‡§≤‡§ø‡§ñ‡•á ‡§™‡§§‡•á ‡§ï‡§æ ‡§Æ‡•à‡§™ ‡§≤‡§ø‡§Ç‡§ï ‡§¨‡§® ‡§ó‡§Ø‡§æ!");
    }
    function finishSetup(msg) { document.getElementById('locModal').style.display='none'; document.getElementById('finalSubmit').style.display='block'; document.getElementById('loader').style.display='none'; alert(msg); }

    function setStar(n) {
        selectedStars = n;
        const stars = document.querySelectorAll('.rating-stars i');
        stars.forEach((s, i) => { s.classList.toggle('active', i < n); });
    }
    function sendReview() {
        if(selectedStars === 0) return alert("‡§∏‡§ø‡§§‡§æ‡§∞‡•á ‡§ö‡•Å‡§®‡•á‡§Ç!");
        alert("‡§´‡•Ä‡§°‡§¨‡•à‡§ï ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶!"); 
        go('home');
    }

    async function saveAndSend() {
        const nameVal = document.getElementById('name').value, phoneVal = document.getElementById('phone').value, addrVal = document.getElementById('addr').value, svcVal = document.getElementById('svc').value, dateVal = document.getElementById('bookDate').value, timeVal = document.getElementById('bookTime').value;
        if(!nameVal || !phoneVal || !addrVal || !dateVal || !timeVal) return alert("‡§∏‡§≠‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≠‡§∞‡•á‡§Ç!");
        document.getElementById('loader').style.display = 'flex';
        const id = "AK-" + Math.floor(1000 + Math.random() * 9000);
        try {
            let fullAddr = `${addrVal} | Dt: ${dateVal} | Tm: ${timeVal}`;
            let p = `?action=addBooking&ID=${id}&Name=${encodeURIComponent(nameVal)}&Phone=${phoneVal}&Address=${encodeURIComponent(fullAddr)}&Service=${encodeURIComponent(svcVal)}&GPS=${encodeURIComponent(userGPS)}&Status=Pending`;
            fetch(SCRIPT_URL + p, {mode: 'no-cors'});
            let waMsg = `*AK SOLUTION HUB*%0AüÜî *ID:* ${id}%0Aüë§ *Name:* ${encodeURIComponent(nameVal)}%0Aüìû *Phone:* ${phoneVal}%0Aüõ†Ô∏è *Service:* ${encodeURIComponent(svcVal)}%0AüìÖ *Date:* ${dateVal}%0A‚è∞ *Time:* ${timeVal}%0Aüìç *Addr:* ${encodeURIComponent(addrVal)}%0Aüåç *Map:* ${encodeURIComponent(userGPS)}`;
            setTimeout(() => { document.getElementById('loader').style.display = 'none'; window.location.href = `https://wa.me/919927464530?text=${waMsg}`; }, 1500);
        } catch(e) { document.getElementById('loader').style.display = 'none'; alert("Error!"); }
    }
</script>
</body>
</html>
