<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AK SOLUTION HUB</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #005eb8; --success: #27ae60; }
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; }
        body { background: #fff; padding-bottom: 100px; font-size: 16px; }
        
        /* Header */
        .header { text-align: center; padding: 15px 10px; background: #fff; }
        .logo-img { width: 90px; height: 90px; border-radius: 50%; border: 3px solid var(--primary); object-fit: cover; margin-bottom: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .header h1 { font-size: 24px; color: var(--primary); font-weight: bold; }

        .ticker { background: var(--primary); color: #fff; padding: 12px; overflow: hidden; white-space: nowrap; font-size: 14px; font-weight: bold; }
        
        /* Slider */
        .slider-box { width: 94%; margin: 15px auto; border-radius: 15px; overflow: hidden; height: 180px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .slider { display: flex; transition: 0.8s ease-in-out; height: 100%; width: 500%; }
        .slider img { width: 20%; object-fit: cover; height: 100%; }

        /* Grid */
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; padding: 10px; }
        .box { background: #fdfdfd; border-radius: 15px; height: 95px; display: flex; flex-direction: column; align-items: center; justify-content: center; border: 1px solid #eee; cursor: pointer; text-align: center; }
        .box i { font-size: 30px; color: var(--primary); margin-bottom: 8px; }
        .box span { font-size: 9px; font-weight: 800; color: #333; text-transform: uppercase; }

        /* Pages */
        .page { display: none; padding: 15px; animation: fadeIn 0.4s; }
        .active-page { display: block !important; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Inputs & Buttons */
        .input { width: 100%; padding: 16px; margin: 10px 0; border: 2px solid #ddd; border-radius: 12px; font-size: 16px; outline: none; }
        .btn { width: 100%; padding: 18px; border: none; border-radius: 12px; color: white; font-weight: bold; font-size: 17px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-loc { background: #3498db; }
        .btn-final { background: var(--success); display: none; margin-top: 10px; }

        /* Navigation */
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: #fff; display: flex; height: 80px; border-top: 1px solid #eee; z-index: 1000; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); }
        .nav-item { flex: 1; text-align: center; color: #777; font-size: 11px; padding-top: 18px; cursor: pointer; }
        .active-nav { color: var(--primary); font-weight: bold; border-top: 4px solid var(--primary); }

        .admin-link { text-align: center; margin: 20px 0; }
        .admin-link a { color: #aaa; font-size: 12px; text-decoration: none; border: 1px solid #eee; padding: 6px 15px; border-radius: 20px; }
        
        .status-card { background: #f8f9fa; padding: 20px; border-radius: 15px; border-left: 5px solid var(--primary); margin-top: 20px; }
    </style>
</head>
<body>

<div class="header">
    <img src="57255.jpg" class="logo-img">
    <h1>AK SOLUTION HUB</h1>
</div>

<div class="ticker">
    <marquee scrollamount="6">üöÄ ‡§µ‡§ø‡§∂‡•ç‡§µ‡§∏‡§®‡•Ä‡§Ø ‡§π‡•ã‡§Æ ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ | ‡§™‡•ç‡§≤‡§Ç‡§¨‡§∞ | ‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•Ä‡§∂‡§ø‡§Ø‡§® | ‡§Ü‡§∞‡§ì | ‡§∏‡•Ä‡§∏‡•Ä‡§ü‡•Ä‡§µ‡•Ä | ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï: 9927464530 üõ†Ô∏è</marquee>
</div>

<div id="home-page" class="page active-page">
    <div class="slider-box">
        <div class="slider" id="mainSlider">
            <img src="1.jpg"><img src="2.jpg"><img src="3.jpg"><img src="4.jpg"><img src="5.jpg">
        </div>
    </div>
    
    <div class="grid">
        <div class="box" onclick="openBooking('PLUMBER')"><i class="fas fa-faucet"></i><span>PLUMBER</span></div>
        <div class="box" onclick="openBooking('ELECTRICIAN')"><i class="fas fa-bolt"></i><span>ELECTRICIAN</span></div>
        <div class="box" onclick="openBooking('CARPENTER')"><i class="fas fa-hammer"></i><span>CARPENTER</span></div>
        <div class="box" onclick="openBooking('RO SERVICE')"><i class="fas fa-tint"></i><span>RO SERVICE</span></div>
        <div class="box" onclick="openBooking('CCTV')"><i class="fas fa-video"></i><span>CCTV</span></div>
        <div class="box" onclick="openBooking('AC SERVICE')"><i class="fas fa-snowflake"></i><span>AC SERVICE</span></div>
        <div class="box" onclick="openBooking('CLEANING')"><i class="fas fa-broom"></i><span>CLEANING</span></div>
        <div class="box" onclick="openBooking('FITTING')"><i class="fas fa-tools"></i><span>FITTING</span></div>
        <div class="box" onclick="openBooking('OTHER')"><i class="fas fa-plus-circle"></i><span>OTHER</span></div>
    </div>

    <div class="admin-link">
        <a href="admin.html">Staff Login</a>
    </div>
</div>

<div id="booking-page" class="page">
    <h3 style="text-align:center; color:var(--primary);">‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§´‡•â‡§∞‡•ç‡§Æ</h3>
    <input type="text" id="selSvc" class="input" readonly style="background:#f0f7ff; border:2px solid var(--primary); font-weight:bold;">
    <input type="text" id="uName" class="input" placeholder="‡§Ü‡§™‡§ï‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ">
    <input type="tel" id="uPhone" class="input" placeholder="WhatsApp ‡§®‡§Ç‡§¨‡§∞">
    <textarea id="uAddr" class="input" rows="3" placeholder="‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ ‡§≤‡§ø‡§ñ‡•á‡§Ç"></textarea>
    <button class="btn btn-loc" id="locBtn" onclick="getLocation()"><i class="fas fa-map-marker-alt"></i> ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§ë‡§ü‡•ã-‡§´‡§ø‡§≤ ‡§ï‡§∞‡•á‡§Ç</button>
    <button class="btn btn-final" id="finalBtn" onclick="submitBooking()"><i class="fab fa-whatsapp"></i> ‡§Ö‡§≠‡•Ä ‡§¨‡•Å‡§ï ‡§ï‡§∞‡•á‡§Ç</button>
</div>

<div id="track-page" class="page">
    <h3 style="text-align:center; color:var(--primary);">‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç</h3>
    <input type="text" id="tId" class="input" placeholder="‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ID ‡§°‡§æ‡§≤‡•á‡§Ç (‡§ú‡•à‡§∏‡•á: AK-1234)" style="text-align:center;">
    <button class="btn" style="background:var(--primary);" onclick="trackStatus()">‡§ñ‡•ã‡§ú‡•á‡§Ç</button>
    <div id="trackResult"></div>
</div>

<div id="review-page" class="page">
    <h3 style="text-align:center; color:var(--primary);">‡§´‡•Ä‡§°‡§¨‡•à‡§ï ‡§¶‡•á‡§Ç</h3>
    <select id="rStar" class="input"><option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option><option value="4">‚≠ê‚≠ê‚≠ê‚≠ê</option></select>
    <textarea id="rMsg" class="input" rows="4" placeholder="‡§Ö‡§™‡§®‡§æ ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§≤‡§ø‡§ñ‡•á‡§Ç..."></textarea>
    <button class="btn" style="background:var(--primary);" onclick="alert('‡§´‡•Ä‡§°‡§¨‡•à‡§ï ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶!')">‡§≠‡•á‡§ú‡•á‡§Ç</button>
</div>

<nav class="nav-bar">
    <div class="nav-item active-nav" onclick="showPage('home-page', this)"><i class="fas fa-home"></i><br>Home</div>
    <div class="nav-item" onclick="showPage('booking-page', this)"><i class="fas fa-calendar-check"></i><br>Book</div>
    <div class="nav-item" onclick="showPage('track-page', this)"><i class="fas fa-search"></i><br>Track</div>
    <div class="nav-item" onclick="showPage('review-page', this)"><i class="fas fa-star"></i><br>Review</div>
</nav>

<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbxRmjB3e9NAHO5m8cwUzb3HGz3j873ZVKUoFhmP4LicDc9qN7_tZzZsGT-pg1-4OstMBA/exec';

    function showPage(id, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
        document.getElementById(id).classList.add('active-page');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active-nav'));
        if(el) el.classList.add('active-nav');
    }

    function openBooking(cat) {
        document.getElementById('selSvc').value = cat;
        showPage('booking-page', document.querySelectorAll('.nav-item')[1]);
    }

    let coords = "Not Shared";
    function getLocation() {
        if(navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(p => {
                coords = p.coords.latitude + "," + p.coords.longitude;
                document.getElementById('locBtn').innerHTML = "‚úÖ ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§∏‡•á‡§µ!";
                document.getElementById('locBtn').style.background = "#27ae60";
                document.getElementById('finalBtn').style.display = "flex";
            }, () => alert("‡§ï‡•É‡§™‡§Ø‡§æ GPS ‡§ë‡§® ‡§ï‡§∞‡•á‡§Ç!"));
        }
    }

    async function submitBooking() {
        const name = document.getElementById('uName').value;
        const phone = document.getElementById('uPhone').value;
        const addr = document.getElementById('uAddr').value;
        const svc = document.getElementById('selSvc').value;
        if (!name || !phone || !addr) return alert("‡§∏‡§≠‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≠‡§∞‡•á‡§Ç!");

        const id = "AK-" + Math.floor(1000 + Math.random() * 8999);
        const date = new Date().toLocaleDateString('hi-IN');
        const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        
        try {
            await fetch(scriptURL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({ action:'addBooking', id, name, phone, address: addr, service: svc, gps: coords, status:'PENDING' }) });
            
            const msg = `*AK SOLUTION HUB - ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó*%0A%0AüÜî *‡§Ü‡§à‡§°‡•Ä:* ${id}%0AüìÖ *‡§§‡§æ‡§∞‡•Ä‡§ñ:* ${date}%0A‚è∞ *‡§∏‡§Æ‡§Ø:* ${time}%0Aüõ†Ô∏è *‡§∏‡•á‡§µ‡§æ:* ${svc}%0Aüë§ *‡§®‡§æ‡§Æ:* ${name}%0Aüìû *‡§´‡•ã‡§®:* ${phone}%0Aüè† *‡§™‡§§‡§æ:* ${addr}%0Aüìç *‡§≤‡•ã‡§ï‡•á‡§∂‡§®:* http://maps.google.com/maps?q=${coords}`;

            window.open(`https://wa.me/919927464530?text=${msg}`, '_blank');
            alert("‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§∏‡§´‡§≤! ID: " + id);
            location.reload();
        } catch (e) { alert("Error!"); }
    }

    async function trackStatus() {
        const id = document.getElementById('tId').value.trim().toUpperCase();
        if(!id) return alert("ID ‡§°‡§æ‡§≤‡•á‡§Ç!");
        const resDiv = document.getElementById('trackResult');
        resDiv.innerHTML = "‡§ñ‡•ã‡§ú ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...";
        try {
            const res = await fetch(scriptURL + "?action=readBookings");
            const data = await res.json();
            const job = data.find(i => i.ID === id);
            resDiv.innerHTML = job ? `<div class="status-card"><h3>${job.Status || 'PENDING'}</h3><p>‡§®‡§æ‡§Æ: ${job.Name}</p><p>‡§∏‡•á‡§µ‡§æ: ${job.Service}</p></div>` : "‡§Ü‡§à‡§°‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä!";
        } catch(e) { resDiv.innerHTML = "‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§è‡§∞‡§∞!"; }
    }

    let sIdx = 0; setInterval(() => { 
        const s = document.getElementById('mainSlider'); 
        if(s) { sIdx = (sIdx + 1) % 5; s.style.transform = `translateX(${-sIdx * 20}%)`; } 
    }, 4000);
</script>
</body>
</html>
