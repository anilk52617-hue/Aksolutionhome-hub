<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AK SOLUTION HUB</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #005eb8; --success: #27ae60; --pending: #f1c40f; }
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; }
        body { background: #fff; padding-bottom: 120px; } /* ‡§∏‡•ç‡§™‡•á‡§∏ ‡§¨‡•ù‡§æ‡§Ø‡§æ ‡§§‡§æ‡§ï‡§ø ‡§¨‡§ü‡§® ‡§¶‡§ø‡§ñ‡•á */
        
        /* Logo & Header */
        .header { text-align: center; padding: 15px 10px; background: #fff; }
        .logo-img { width: 90px; height: 90px; border-radius: 50%; border: 3px solid var(--primary); object-fit: cover; margin-bottom: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .header h1 { font-size: 22px; color: var(--primary); font-weight: bold; }

        .ticker { background: var(--primary); color: #fff; padding: 10px; overflow: hidden; white-space: nowrap; font-size: 14px; font-weight: bold; }
        
        /* Slider */
        .slider-box { width: 94%; margin: 15px auto; border-radius: 15px; overflow: hidden; height: 180px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .slider { display: flex; transition: 0.8s ease-in-out; height: 100%; width: 500%; }
        .slider img { width: 20%; object-fit: cover; }

        /* Pages */
        .page { display: none; padding: 15px; animation: fadeIn 0.4s; }
        .active-page { display: block !important; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Grids */
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .box { background: #fdfdfd; border-radius: 15px; height: 95px; display: flex; flex-direction: column; align-items: center; justify-content: center; border: 1px solid #eee; cursor: pointer; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .box i { font-size: 28px; color: var(--primary); margin-bottom: 8px; }
        .box span { font-size: 9px; font-weight: 800; color: #333; text-transform: uppercase; }

        /* Inputs */
        .input { width: 100%; padding: 15px; margin: 10px 0; border: 2px solid #eee; border-radius: 12px; font-size: 16px; outline: none; transition: 0.3s; }
        .input:focus { border-color: var(--primary); }
        .btn { width: 100%; padding: 16px; border: none; border-radius: 12px; color: white; font-weight: bold; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; border-bottom: 4px solid rgba(0,0,0,0.2); }
        .btn-loc { background: #3498db; margin-top: 10px; }
        .btn-final { background: var(--success); display: none; margin-top: 10px; }

        /* Bottom Navigation */
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: #fff; display: flex; height: 75px; border-top: 1px solid #eee; z-index: 1000; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); }
        .nav-item { flex: 1; text-align: center; color: #777; font-size: 11px; padding-top: 15px; cursor: pointer; }
        .active-nav { color: var(--primary); font-weight: bold; border-top: 3px solid var(--primary); }

        /* Staff Login Button */
        .admin-link-btn { text-align: center; margin: 30px 0; }
        .admin-link-btn a { text-decoration: none; color: #aaa; font-size: 12px; font-weight: bold; border: 1px solid #eee; padding: 8px 15px; border-radius: 20px; }

        /* Modal */
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); z-index:5000; backdrop-filter: blur(5px); }
        .modal-content { position:relative; top:50%; left:50%; transform:translate(-50%,-50%); width:92%; background:white; padding:20px; border-radius:20px; }
        
        #loader { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.9); z-index:10000; justify-content:center; align-items:center; flex-direction: column; font-weight:bold; }
        
        .status-card { background: #f8f9fa; padding: 20px; border-radius: 15px; border-left: 5px solid var(--primary); margin-top: 20px; text-align: left; }
    </style>
</head>
<body>

<div id="loader">
    <i class="fas fa-spinner fa-spin fa-3x" style="color:var(--primary); margin-bottom:10px;"></i>
    <br>‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...
</div>

<div class="header">
    <img src="57255.jpg" class="logo-img" onerror="this.src='https://via.placeholder.com/90?text=AK+HUB'">
    <h1>AK SOLUTION HUB</h1>
</div>

<div class="ticker">
    <marquee scrollamount="6">üöÄ ‡§µ‡§ø‡§∂‡•ç‡§µ‡§∏‡§®‡•Ä‡§Ø ‡§π‡•ã‡§Æ ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ | ‡§™‡•ç‡§≤‡§Ç‡§¨‡§∞ | ‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•Ä‡§∂‡§ø‡§Ø‡§® | ‡§Ü‡§∞‡§ì | ‡§∏‡•Ä‡§∏‡•Ä‡§ü‡•Ä‡§µ‡•Ä | ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï: 9927464530 üõ†Ô∏è</marquee>
</div>

<div id="home-page" class="page active-page">
    <div class="slider-box">
        <div class="slider" id="mainSlider">
            <img src="1.jpg" onerror="this.src='https://via.placeholder.com/400x180?text=Service+1'">
            <img src="2.jpg" onerror="this.src='https://via.placeholder.com/400x180?text=Service+2'">
            <img src="3.jpg" onerror="this.src='https://via.placeholder.com/400x180?text=Service+3'">
            <img src="4.jpg" onerror="this.src='https://via.placeholder.com/400x180?text=Service+4'">
            <img src="5.jpg" onerror="this.src='https://via.placeholder.com/400x180?text=Service+5'">
        </div>
    </div>
    
    <div class="grid">
        <div class="box" onclick="openSub('PLUMBER')"><i class="fas fa-faucet"></i><span>PLUMBER</span></div>
        <div class="box" onclick="openSub('ELECTRICIAN')"><i class="fas fa-bolt"></i><span>ELECTRICIAN</span></div>
        <div class="box" onclick="openSub('CARPENTER')"><i class="fas fa-hammer"></i><span>CARPENTER</span></div>
        <div class="box" onclick="openSub('RO SERVICE')"><i class="fas fa-tint"></i><span>RO SERVICE</span></div>
        <div class="box" onclick="openSub('CCTV')"><i class="fas fa-video"></i><span>CCTV</span></div>
        <div class="box" onclick="openSub('AC SERVICE')"><i class="fas fa-snowflake"></i><span>AC SERVICE</span></div>
        <div class="box" onclick="openSub('CLEANING')"><i class="fas fa-broom"></i><span>CLEANING</span></div>
        <div class="box" onclick="openSub('FITTING')"><i class="fas fa-tools"></i><span>FITTING</span></div>
        <div class="box" onclick="openSub('OTHER')"><i class="fas fa-plus-circle"></i><span>OTHER</span></div>
    </div>

    <div class="admin-link-btn">
        <a href="admin.html"><i class="fas fa-user-shield"></i> Staff Login</a>
    </div>
</div>

<div id="booking-page" class="page">
    <h3 style="text-align:center; color:var(--primary); margin-bottom:10px;">‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§´‡•â‡§∞‡•ç‡§Æ</h3>
    <input type="text" id="selSvc" class="input" readonly style="background:#f0f7ff; border:2px solid var(--primary); font-weight:bold; color:var(--primary);">
    <input type="text" id="uName" class="input" placeholder="‡§Ü‡§™‡§ï‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ">
    <input type="tel" id="uPhone" class="input" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (WhatsApp)">
    <textarea id="uAddr" class="input" rows="3" placeholder="‡§Æ‡§ï‡§æ‡§® ‡§®‡§Ç, ‡§ó‡§≤‡•Ä, ‡§≤‡•à‡§Ç‡§°‡§Æ‡§æ‡§∞‡•ç‡§ï ‡§î‡§∞ ‡§∂‡§π‡§∞"></textarea>
    
    <button class="btn btn-loc" id="locBtn" onclick="getLocation()"><i class="fas fa-map-marker-alt"></i> ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§ë‡§ü‡•ã-‡§´‡§ø‡§≤ ‡§ï‡§∞‡•á‡§Ç</button>
    <button class="btn btn-final" id="finalBtn" onclick="submitBooking()"><i class="fab fa-whatsapp"></i> ‡§Ö‡§≠‡•Ä ‡§¨‡•Å‡§ï ‡§ï‡§∞‡•á‡§Ç</button>
</div>

<div id="track-page" class="page">
    <h3 style="text-align:center; color:var(--primary); margin-bottom:15px;">‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç</h3>
    <input type="text" id="tId" class="input" placeholder="‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ID ‡§°‡§æ‡§≤‡•á‡§Ç" style="text-align:center; text-transform:uppercase;">
    <button class="btn" style="background:var(--primary);" onclick="trackStatus()">‡§ñ‡•ã‡§ú‡•á‡§Ç</button>
    <div id="trackResult"></div>
</div>

<div id="review-page" class="page">
    <h3 style="text-align:center; color:var(--primary);">‡§´‡•Ä‡§°‡§¨‡•à‡§ï ‡§¶‡•á‡§Ç</h3>
    <select id="rStar" class="input"><option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option><option value="4">‚≠ê‚≠ê‚≠ê‚≠ê</option></select>
    <textarea id="rMsg" class="input" rows="4" placeholder="‡§Ö‡§™‡§®‡§æ ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§≤‡§ø‡§ñ‡•á‡§Ç..."></textarea>
    <button class="btn" style="background:var(--primary);" onclick="alert('‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶!')">‡§≠‡•á‡§ú‡•á‡§Ç</button>
</div>

<div id="subModal" class="modal">
    <div class="modal-content">
        <h3 id="mTitle" style="text-align:center; margin-bottom:15px; color:var(--primary);"></h3>
        <div id="mList" class="grid" style="grid-template-columns: 1fr 1fr; gap: 8px;"></div>
        <button onclick="document.getElementById('subModal').style.display='none'" style="width:100%; margin-top:20px; padding:12px; border:none; background:#444; color:white; border-radius:10px;">‡§™‡•Ä‡§õ‡•á ‡§ú‡§æ‡§è‡§Ç</button>
    </div>
</div>

<nav class="nav-bar">
    <div class="nav-item active-nav" onclick="showPage('home-page', this)"><i class="fas fa-home"></i><br>Home</div>
    <div class="nav-item" onclick="showPage('booking-page', this)"><i class="fas fa-calendar-alt"></i><br>Book</div>
    <div class="nav-item" onclick="showPage('track-page', this)"><i class="fas fa-search"></i><br>Track</div>
    <div class="nav-item" onclick="showPage('review-page', this)"><i class="fas fa-star"></i><br>Review</div>
</nav>

<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbxRmjB3e9NAHO5m8cwUzb3HGz3j873ZVKUoFhmP4LicDc9qN7_tZzZsGT-pg1-4OstMBA/exec';

    const services = {
        'PLUMBER': ['‡§®‡§≤ ‡§∞‡§ø‡§™‡•á‡§Ø‡§∞', '‡§ü‡§Ç‡§ï‡•Ä ‡§∏‡§´‡§æ‡§à', '‡§™‡§æ‡§á‡§™ ‡§≤‡•Ä‡§ï‡•á‡§ú', '‡§®‡§à ‡§´‡§ø‡§ü‡§ø‡§Ç‡§ó', '‡§ó‡•Ä‡§ú‡§∞ ‡§´‡§ø‡§ü‡§ø‡§Ç‡§ó', '‡§∏‡§ø‡§Ç‡§ï ‡§ú‡§æ‡§Æ', '‡§Æ‡•ã‡§ü‡§∞ ‡§∞‡§ø‡§™‡•á‡§Ø‡§∞', '‡§¨‡§æ‡§• ‡§´‡§ø‡§ü‡§ø‡§Ç‡§ó', '‡§Ö‡§®‡•ç‡§Ø'],
        'ELECTRICIAN': ['‡§™‡§Ç‡§ñ‡§æ ‡§∞‡§ø‡§™‡•á‡§Ø‡§∞', '‡§®‡§à ‡§µ‡§æ‡§Ø‡§∞‡§ø‡§Ç‡§ó', '‡§¨‡•ã‡§∞‡•ç‡§°/‡§∏‡•ç‡§µ‡§ø‡§ö', '‡§≤‡§æ‡§á‡§ü ‡§´‡§ø‡§ü‡§ø‡§Ç‡§ó', 'MCB ‡§´‡•â‡§≤‡•ç‡§ü', '‡§ù‡•Ç‡§Æ‡§∞ ‡§´‡§ø‡§ü‡§ø‡§Ç‡§ó', '‡§Ö‡§®‡•ç‡§Ø'],
        'CARPENTER': ['‡§¶‡§∞‡§µ‡§æ‡§ú‡§æ ‡§≤‡•â‡§ï', '‡§Ö‡§≤‡§Æ‡§æ‡§∞‡•Ä ‡§∞‡§ø‡§™‡•á‡§Ø‡§∞', '‡§¨‡•á‡§° ‡§Ö‡§∏‡•á‡§Ç‡§¨‡§≤‡•Ä', '‡§™‡•â‡§≤‡§ø‡§∂/‡§™‡•á‡§Ç‡§ü', '‡§ï‡§ø‡§ö‡§® ‡§µ‡§∞‡•ç‡§ï', '‡§Ö‡§®‡•ç‡§Ø'],
        'RO SERVICE': ['‡•û‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ö‡•á‡§Ç‡§ú', '‡§Æ‡•á‡§Æ‡•ç‡§¨‡•ç‡§∞‡•á‡§® ‡§ö‡•á‡§Ç‡§ú', '‡§™‡§Ç‡§™ ‡§∞‡§ø‡§™‡•á‡§Ø‡§∞', '‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏‡§ø‡§Ç‡§ó', '‡§Ö‡§®‡•ç‡§Ø'],
        'CCTV': ['‡§ï‡•à‡§Æ‡§∞‡§æ ‡§´‡§ø‡§ü‡§ø‡§Ç‡§ó', 'DVR ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó', '‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§µ‡•ç‡§Ø‡•Ç', '‡§µ‡§æ‡§Ø‡§∞‡§ø‡§Ç‡§ó', 'Setup ‡§∂‡§ø‡§´‡•ç‡§ü', '‡§Ö‡§®‡•ç‡§Ø'],
        'AC SERVICE': ['‡§è‡§∏‡•Ä ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏', '‡§ó‡•à‡§∏ ‡§ö‡§æ‡§∞‡•ç‡§ú‡§ø‡§Ç‡§ó', '‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤', '‡§∞‡§ø‡§Æ‡•Ç‡§µ‡§≤', '‡§Ö‡§®‡•ç‡§Ø'],
        'CLEANING': ['‡§ò‡§∞ ‡§ï‡•Ä ‡§∏‡§´‡§æ‡§à', '‡§¨‡§æ‡§•‡§∞‡•Ç‡§Æ ‡§°‡•Ä‡§™', '‡§∏‡•ã‡§´‡§æ ‡§ï‡•ç‡§≤‡•Ä‡§®', '‡§ï‡§ø‡§ö‡§® ‡§ï‡•ç‡§≤‡•Ä‡§®', '‡§Ö‡§®‡•ç‡§Ø'],
        'FITTING': ['TV ‡§∏‡•ç‡§ü‡•à‡§Ç‡§°', '‡§™‡§∞‡•ç‡§¶‡§æ ‡§∞‡•â‡§°', '‡§Ü‡§à‡§®‡§æ ‡§´‡§ø‡§ü‡§ø‡§Ç‡§ó', '‡§´‡•ã‡§ü‡•ã ‡§´‡•ç‡§∞‡•á‡§Æ', '‡§Ö‡§®‡•ç‡§Ø'],
        'OTHER': ['‡§™‡•á‡§Ç‡§ü‡§∞', '‡§∞‡§æ‡§ú‡§Æ‡§ø‡§∏‡•ç‡§§‡•ç‡§∞‡•Ä', '‡§µ‡•á‡§≤‡•ç‡§°‡§ø‡§Ç‡§ó', '‡§≤‡•á‡§¨‡§∞ ‡§π‡•á‡§≤‡•ç‡§™', '‡§Ö‡§®‡•ç‡§Ø']
    };

    function showPage(id, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
        document.getElementById(id).classList.add('active-page');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active-nav'));
        if(el) el.classList.add('active-nav');
    }

    function openSub(cat) {
        const modal = document.getElementById('subModal');
        const list = document.getElementById('mList');
        document.getElementById('mTitle').innerText = cat;
        list.innerHTML = "";
        services[cat].forEach(s => {
            const d = document.createElement('div');
            d.className = 'box'; d.style.height = '60px';
            d.innerHTML = `<span style="font-size:10px;">${s}</span>`;
            d.onclick = () => {
                document.getElementById('selSvc').value = cat + " - " + s;
                modal.style.display = 'none';
                showPage('booking-page', document.querySelectorAll('.nav-item')[1]);
            };
            list.appendChild(d);
        });
        modal.style.display = 'block';
    }

    let coords = "Not Shared";
    function getLocation() {
        if(navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(p => {
                coords = p.coords.latitude + "," + p.coords.longitude;
                document.getElementById('locBtn').innerHTML = "‚úÖ ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§∏‡•á‡§µ!";
                document.getElementById('locBtn').style.background = "#27ae60";
                document.getElementById('finalBtn').style.display = "flex";
            }, () => alert("GPS ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§Ç!"));
        }
    }

    async function submitBooking() {
        const name = document.getElementById('uName').value.trim();
        const phone = document.getElementById('uPhone').value.trim();
        const addr = document.getElementById('uAddr').value.trim();
        const svc = document.getElementById('selSvc').value;
        if (!name || !phone || !addr) return alert("‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≠‡§∞‡•á‡§Ç!");

        const id = "AK-" + Math.floor(1000 + Math.random() * 8999);
        document.getElementById('loader').style.display = 'flex';
        try {
            await fetch(scriptURL, { 
                method: 'POST', mode: 'no-cors', 
                body: JSON.stringify({ action:'addBooking', id, name, phone, address: addr, service: svc, gps: coords, status:'PENDING' }) 
            });
            window.open(`https://wa.me/919927464530?text=*AK HUB BOOKING*%0AID: ${id}%0A‡§®‡§æ‡§Æ: ${name}%0A‡§∏‡•á‡§µ‡§æ: ${svc}`, '_blank');
            alert("‡§∏‡§´‡§≤! ‡§Ü‡§™‡§ï‡•Ä ID: " + id);
            location.reload();
        } catch (e) { alert("Error!"); }
        document.getElementById('loader').style.display = 'none';
    }

    async function trackStatus() {
        const id = document.getElementById('tId').value.trim().toUpperCase();
        if(!id) return alert("ID ‡§≠‡§∞‡•á‡§Ç!");
        document.getElementById('loader').style.display = 'flex';
        const resDiv = document.getElementById('trackResult');
        try {
            const res = await fetch(scriptURL + "?action=readBookings");
            const data = await res.json();
            const job = data.find(i => i.ID === id);
            resDiv.innerHTML = job ? `<div class="status-card"><h3>${job.Status || 'PENDING'}</h3><p>‡§®‡§æ‡§Æ: ${job.Name}</p><p>‡§∏‡•á‡§µ‡§æ: ${job.Service}</p></div>` : "ID ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä!";
        } catch(e) { alert("Error!"); }
        document.getElementById('loader').style.display = 'none';
    }

    let sIdx = 0; setInterval(() => { 
        const s = document.getElementById('mainSlider'); 
        if(s) { sIdx = (sIdx + 1) % 5; s.style.transform = `translateX(${-sIdx * 20}%)`; } 
    }, 4000);
</script>
</body>
</html>
